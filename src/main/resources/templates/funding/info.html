<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FesLite — 펀딩 상세</title>
  <script defer th:src="@{/js/favorite.js}"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link th:href="@{/css/funding.css}" rel="stylesheet" />
</head>
<body class="funding-bg">
  <!-- Header -->
  <header class="border-bottom bg-white bg-opacity-75 backdrop-blur sticky-top">
    <div class="container d-flex align-items-center gap-3 py-2">
      <a class="navbar-brand fw-bold" th:href="@{/funding/main}">FesLite Funding</a>
      <a class="small text-muted d-none d-md-block" th:href="@{/}">축제 페이지</a>
      <div class="ms-auto d-flex gap-2">
        <button class="btn btn-outline-dark"><i class="bi bi-share"></i> 공유</button>
        <button class="btn btn-outline-dark"><i class="bi bi-bookmark"></i> 찜</button>
      </div>
    </div>
  </header>

  <!-- Hero / Summary -->
  <section class="py-4">
    <div class="container">
      <div class="row g-3 g-lg-4">
        <div class="col-lg-7">
          <div class="ratio ratio-16x9 rounded-3 overflow-hidden shadow-sm">
            <img class="object-fit-cover" th:src="${funding.festival_img_path != null ? funding.festival_img_path : '/images/default.png'}" alt="축제 포스터" />
          </div>

          <h2 class="mt-3" th:text="${funding.festival_name}"></h2>
          <p class="text-muted" th:text="${funding.festival_short}"></p>

          <div class="tab-content border rounded-bottom bg-white p-3 shadow-sm" id="detailTabsContent">
            <div class="tab-pane fade show active" id="tab-desc" role="tabpanel">
              <h5>축제 소개</h5>
              <p th:text="${funding.festival_info}"></p>
              <ul>
                <li>일시: <span th:text="${funding.festival_begin_date}"></span> ~ <span th:text="${funding.festival_end_date}"></span></li>
                <li>장소: <span th:text="${funding.festival_address}"></span></li>
                <li>주최: <span th:text="${funding.festival_host}"></span></li>
              </ul>
              
              <p class="small text-muted">※ 상세 일정 및 참여 부스등 변경시 재공지 예정입니다</p>
            </div>

          </div>
        </div>

        <!-- Right: Widget -->
        <div class="col-lg-5">
          <aside class="funding-sticky card border-0 shadow-sm">
            <div class="card-body">
              <div class="d-flex align-items-baseline justify-content-between mb-1">
                <div class="h4 mb-0"><span id="percent">0</span>%</div>
                <div class="small text-muted">D-<span id="dday">0</span></div>
              </div>
              <div class="progress mb-2">
                <div id="bar" class="progress-bar" role="progressbar" style="width:0%"></div>
              </div>
              <div class="d-flex justify-content-between small text-muted mb-3">
                <span><span id="raised">0</span>원</span>
                <span><span id="goal">0</span>원 목표</span>
              </div>

              <div class="fw-semibold mb-2">후원 금액 선택</div>
              <div class="d-grid gap-2 mb-2">
                <button class="btn btn-outline-dark amt" data-amt="10000">10,000원</button>
                <button class="btn btn-outline-dark amt" data-amt="30000">30,000원</button>
                <button class="btn btn-outline-dark amt" data-amt="50000">50,000원</button>
              </div>
              <div class="input-group mb-3">
                <span class="input-group-text">₩</span>
                <input id="customAmt" type="number" class="form-control" placeholder="직접 입력" />
                <button id="btnApplyAmt" class="btn btn-outline-dark">적용</button>
              </div>

              <button id="btnFund" class="btn btn-gradient w-100">이 프로젝트 후원하기</button>

              <hr>
              <ul class="small text-muted list-unstyled vstack gap-1">
                <li><i class="bi bi-shield-check"></i> 안전결제 · 환불정책 안내</li>
                <li><i class="bi bi-people"></i> 후원자 1,254명 참여</li>
              </ul>
            </div>
          </aside>
        </div>
      </div>
    </div>
    
  </section>

  <footer class="py-5 text-center text-muted small">
    <div class="container">© 2025 FesLite Funding</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script th:src="@{/js/funding.js}"></script>
  <script>
    const DETAIL = { end: '2025-11-20', raised: 42000000, goal: 60000000 };
    window.addEventListener('DOMContentLoaded', () => {
      if (window.initFundingDetail) initFundingDetail(DETAIL);
    });
  </script>
</body>
</html>
