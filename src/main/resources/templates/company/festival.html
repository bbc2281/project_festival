<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ë‚˜ì˜ ì¶•ì œ ì¡°íšŒ â€” FesLite</title>
  <script defer th:src="@{/js/app.js}"></script>
  <script defer th:src="@{/js/aside.js}"></script>
  <link rel="stylesheet" th:href="@{/css/mystyle.css}" />
  <link rel="stylesheet" th:href="@{/css/sponsor.css}" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body{background:linear-gradient(135deg,#ffdee9 0%,#b5fffc 100%);font-family:'Pretendard',sans-serif;}
    .mypage-wrapper{display:grid;grid-template-columns:240px 1fr;gap:24px;max-width:1100px;margin:40px auto;padding:0 16px;}
    .sidebar{background:#ffffffc9;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,0.1);padding:20px 16px;}
    .menu a{display:flex;justify-content:space-between;align-items:center;text-decoration:none;color:#333;padding:10px 12px;border-radius:10px;font-weight:600;}
    .menu a:hover{background:#f0f2ff;color:#6b21a8;}
    .menu a.active{background:#6b21a8;color:#fff;}
    .main{display:flex;flex-direction:column;gap:24px;}
    .badge {
  display: inline-block;
  padding: 6px 10px;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 600;
  color: black;
}

.badge-success {
  background-color: #28a745; /* ì§„í•œ ì´ˆë¡ìƒ‰ */
}

.badge-pending {
  background-color: #ffc107; /* ë…¸ë€ìƒ‰ */
  color: #333;
}
.modal {
  display: none; /* ê¸°ë³¸ì€ ìˆ¨ê¹€ */
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
}

.modal-content {
  background: white;
  width: 400px;
  margin: 10% auto;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px #444;
}

.close-btn {
  float: right;
  font-size: 24px;
  cursor: pointer;
}
    .sidebar {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, .1);
      padding: 20px 16px;
    }

    .menu a {
      display: flex;
      justify-content: space-between;
      padding: 10px 12px;
      border-radius: 10px;
      text-decoration: none;
      color: #333;
      font-weight: 600;
      transition: .15s;
    }

    .menu a:hover {
      background: #f0f2ff;
      color: #6b21a8;
    }

    .menu a.active {
      background: #6b21a8;
      color: #fff;
      font-weight: 700;
    }
  </style>
</head>
<body>
  <div th:replace="~{common/header :: header}"></div>
<main class="mypage-wrapper">
  <div th:replace="~{common/companyAside :: aside}"></div>

  <section class="main">
    <h3>ë“±ë¡í•œ ì¶•ì œ ëª©ë¡</h3>
    <table id="festival-table">
      <tr>
        <th>ì¶•ì œëª…</th>
        <th>ìƒíƒœ</th>
        <th>ì •ë³´</th>
      </tr>
      <tr th:each="festival : ${festivalList}"
          th:data-name="${festival.festival_name}"
          th:data-info="${festival.festival_info}"
          th:data-log="${festival.festival_reg_log}"
          class="festival-row">

        <td th:text="${festival.festival_name}"></td>
        <td>
          <span class="badge"
                th:text="${festival.festival_reg_log == 1 ? 'ìŠ¹ì¸ì™„ë£Œ' : 'ìŠ¹ì¸ëŒ€ê¸°'}"
                th:classappend="${festival.festival_reg_log == 1} ? 'badge-success' : 'badge-pending'">
          </span>
        </td>
        <td th:text="${festival.festival_info}"></td>
      </tr>
    </table>
  </section>

  <!-- âœ… ëª¨ë‹¬ ì˜ì—­ -->
  <div id="festival-modal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h3 id="modal-title"></h3>
      <p><strong>ìƒíƒœ:</strong> <span id="modal-status"></span></p>
      <p><strong>ì •ë³´:</strong></p>
      <p id="modal-info"></p>
    </div>
  </div>
</main>

  <footer class="footer">
    <div class="container">Â© 2025 FesLite â€” ëª¨ë‘ì˜ ì¶•ì œë¥¼ ì—°ê²°í•©ë‹ˆë‹¤ ğŸª</div>
  </footer>
</body>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const rows = document.querySelectorAll('.festival-row');
  const modal = document.getElementById('festival-modal');
  const title = document.getElementById('modal-title');
  const info = document.getElementById('modal-info');
  const status = document.getElementById('modal-status');
  const closeBtn = document.querySelector('.close-btn');

  rows.forEach(row => {
    row.addEventListener('click', () => {
      const name = row.dataset.name;
      const festivalInfo = row.dataset.info;
      const log = row.dataset.log == "1" ? 'ìŠ¹ì¸ì™„ë£Œ' : 'ìŠ¹ì¸ëŒ€ê¸°';

      title.textContent = name;
      info.textContent = festivalInfo;
      status.textContent = log;

      modal.style.display = 'block';
    });
  });

  // ë‹«ê¸° ë²„íŠ¼
  closeBtn.addEventListener('click', () => modal.style.display = 'none');

  // ëª¨ë‹¬ ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
  window.addEventListener('click', (e) => {
    if (e.target === modal) modal.style.display = 'none';
  });
});
</script>
</html>
