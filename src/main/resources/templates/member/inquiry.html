<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>1:1 ë¬¸ì˜ â€” FesLite</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <style>
    body{background:linear-gradient(135deg,#ffdee9 0%,#b5fffc 100%);font-family:'Pretendard',sans-serif;}
    .mypage-wrapper{display:grid;grid-template-columns:240px 1fr;gap:24px;max-width:1100px;margin:40px auto;padding:0 16px;}
    .sidebar{background:#fff;border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.1);padding:20px 16px;}
    .menu a{display:flex;justify-content:space-between;padding:10px 12px;border-radius:10px;text-decoration:none;color:#333;font-weight:600;transition:.15s;}
    .menu a:hover{background:#f0f2ff;color:#6b21a8;}
    .menu a.active{background:#6b21a8;color:#fff;font-weight:700;}
    .main{background:#fff;border-radius:20px;box-shadow:0 4px 14px rgba(0,0,0,.1);padding:30px;}
    label{display:block;margin-top:12px;font-weight:600;}
    input,textarea{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-top:4px;}
    button{margin-top:20px;padding:10px 16px;border:none;border-radius:8px;background:#6b21a8;color:#fff;font-weight:700;}
    @media(max-width:900px){.mypage-wrapper{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div th:replace="~{common/memberHeader :: header}"></div>

  <main class="mypage-wrapper">
    <div th:replace="~{common/memberAside :: aside}"></div>

    <section class="main">
      <h3>1:1 ë¬¸ì˜</h3>
      <form id="inquiryForm" th:action="@{/mypage/regInquiry}" method="post" th:object="${inquiry}">
        <label>ë¬¸ì˜ ì œëª©</label>
        <input type="text" id="title" placeholder="ì˜ˆ: ì¶•ì œ ë“±ë¡ ê´€ë ¨ ë¬¸ì˜" th:field="*{inquiry_title}" required>
        <label>ë¬¸ì˜ ë‚´ìš©</label>
        <textarea id="content" rows="5" th:field="*{inquiry_content}" required></textarea>
        <button type="submit">ë¬¸ì˜ ë³´ë‚´ê¸°</button>
      </form>
      <p id="resultMsg" style="margin-top:20px;color:#6b21a8;font-weight:600;"></p>
    </section>
  </main>

  <footer class="footer"><div class="container">Â© 2025 FesLite â€” ëª¨ë‘ì˜ ì¶•ì œë¥¼ ì—°ê²°í•©ë‹ˆë‹¤ ğŸ¡</div></footer>

  <script>
    // âœ… ìë™ ë©”ë‰´ í™œì„±í™”
    document.addEventListener('DOMContentLoaded',()=>{
      const links=document.querySelectorAll('.menu a');
      const currentPath=window.location.pathname.split("/").pop();
      links.forEach(link=>{
        const href=link.getAttribute('href');
        if(currentPath===href){link.classList.add('active');}
      });
    });

    // âœ… ë¬¸ì˜ ì „ì†¡ ì‹œ ê°€ì§œ ì•Œë¦¼
    document.getElementById('inquiryForm').addEventListener('submit', e => {
  e.preventDefault();
  const formData = new FormData(e.target);

  fetch(e.target.action, {
    method: 'POST',
    body: formData
  })
  .then(res => {
    if (res.ok) {
      document.getElementById('resultMsg').innerText = "ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!";
      e.target.reset();
    } else {
      document.getElementById('resultMsg').innerText = "ë¬¸ì˜ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
    }
  })
  .catch(() => {
    document.getElementById('resultMsg').innerText = "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
  });
  });
    
  </script>
</body>
</html>
